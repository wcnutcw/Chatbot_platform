from langchain.prompts import PromptTemplate

def Prompt_Template(context_p, question_p):
    context=context_p
    question=question_p
    prompt_template = PromptTemplate.from_template("""
    ข้อมูลต่อไปนี้ถูกรวบรวมมาจากหลายแหล่งไฟล์ เช่น PDF, Word, Excel หรือ CSV ซึ่งอาจอยู่ในรูปแบบข้อความทั่วไป ตาราง หรือภาพประกอบ:
    {context}

    คำถามของฉันคือ: "{question}"

    กรุณาตอบโดยปฏิบัติตามข้อกำหนดดังนี้:

    1. เริ่มต้นคำตอบด้วยประโยค เช่น "จากเอกสารที่อ่าน..." หรือ "จากข้อมูลที่วิเคราะห์ได้..." เพื่อสร้างความเชื่อมโยงกับข้อมูลต้นทาง
    2. จัดเรียงคำตอบในรูปแบบข้อ ๆ โดย:
    - หากข้อมูลเป็นข้อความทั่วไป ให้สรุปประเด็นสำคัญตามลำดับตรรกะ
    - หากข้อมูลเป็นตาราง ให้วิเคราะห์:
        - อธิบายโครงสร้างของตาราง เช่น จำนวนคอลัมน์ และข้อมูลที่นำเสนอ
        - สรุปข้อมูลที่สำคัญจากแต่ละแถวหรือแต่ละคอลัมน์
        - เปรียบเทียบหรือวิเคราะห์แนวโน้มที่พบในข้อมูลตาราง (ถ้ามี)
    3. หากข้อมูลเป็นภาพ:
    - วิเคราะห์องค์ประกอบต่าง ๆ ในภาพอย่างละเอียด ทั้งในเชิงโครงสร้าง เนื้อหา และความสัมพันธ์ของข้อมูล
    - หากเป็นกราฟหรือแผนภูมิ ให้อธิบายข้อมูลบนแกน X และ Y (ถ้ามี)
    - นำเสนอการวิเคราะห์ภาพในรูปแบบลำดับขั้นตอน (Step-by-step) โดยเริ่มจากองค์ประกอบหลักก่อน
    4. ห้ามเขียนซ้ำคำถาม หรือเริ่มต้นด้วยคำว่า "คำตอบ:"
    5. ใช้ข้อความธรรมดาเท่านั้น ห้ามใช้ Markdown หรือการทำตัวหนา/เน้นข้อความด้วยสัญลักษณ์พิเศษ (เช่น ** ## * _)
    6. ภาษาที่ใช้ต้องเป็นทางการ สุภาพ ถูกต้องตามหลักภาษา เหมาะสมสำหรับการนำไปใช้อ้างอิงในงานวิจัยหรือเอกสารวิชาการ
    7. เมื่อสรุปท้าย ให้สรุปด้วยถ้อยคำกระชับ ชัดเจน ไม่ซ้ำกับรายละเอียดที่อธิบายไปแล้ว

    ตัวอย่างการเริ่มต้นคำตอบ:

    "จากข้อมูลที่วิเคราะห์ได้ สามารถสรุปได้ดังนี้:"
    หรือ
    "จากเอกสารที่อ่าน พบข้อมูลสำคัญดังนี้:"

    ---

    กรุณาตอบคำถามต่อไปนี้ตามข้อกำหนดข้างต้น:
    """)
    final_prompt = prompt_template.format(context=context, question=question)
    return final_prompt